(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57f30272"],{"8f02":function(t,i,e){},9919:function(t,i,e){"use strict";var s=e("8f02"),a=e.n(s);a.a},"9f52":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("NavBar"),e("Alert"),e("main",[e("loading",{attrs:{active:t.isloading},on:{"update:active":function(i){t.isloading=i}}},[[e("div",{staticClass:"bazzi-loading"})]],2),e("div",{staticClass:"container p-3"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb"},[e("li",{staticClass:"breadcrumb-item",attrs:{"aria-current":"page"}},[e("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),e("li",{staticClass:"breadcrumb-item",attrs:{"aria-current":"page"}},[e("router-link",{attrs:{to:"/shop"}},[t._v("商城")])],1),e("li",{staticClass:"breadcrumb-item",attrs:{"aria-current":"page"}},[t._v(t._s(t.product.title))])])]),e("div",{staticClass:"row no-gutters py-2"},[e("div",{staticClass:"col-lg-5 col-sm-12 d-flex justify-content-center align-items-center bg-dark mx-md-0 mr-lg-5"},[e("img",{attrs:{src:t.product.imageUrl,alt:t.product.title}})]),e("div",{staticClass:"info col-lg-6 col-sm-12"},[e("div",{staticClass:"info-title d-flex justify-content-between"},[e("h1",[t._v(t._s(t.product.title))]),e("span",{staticClass:"ml-1 badge badge-secondary"},[t._v(t._s(t.product.category))])]),e("div",{staticClass:"info-price"},[e("div",{staticClass:"mt-3"},[t.product.price===t.product.origin_price?e("p",{staticClass:"text-success"},[t._v("售價 "+t._s(t.product.origin_price)+" 元")]):t._e(),t.product.price!==t.product.origin_price?e("del",{staticClass:"mr-1 text-success"},[t._v("原價"+t._s(t.product.origin_price)+"元")]):t._e(),t.product.price!==t.product.origin_price?e("p",{staticClass:"m-0 text-danger"},[t._v("售價"+t._s(t.product.price)+" 元")]):t._e()])]),e("div",{staticClass:"info-details my-3"},[e("h5",[t._v("商品描述")]),e("div",{staticClass:"mb-4",domProps:{innerHTML:t._s(t.description)}}),e("h5",[t._v("商品特色")]),e("div",{domProps:{innerHTML:t._s(t.content)}})]),e("div",{staticClass:"d-flex justify-content-between"},[e("h5",{staticClass:"align-middle"},[t._v("數量")]),e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[e("button",{staticClass:"btn btn-primary ml-2",class:{disabled:t.qty<=1},attrs:{type:"button"},on:{click:function(i){i.preventDefault(),t.decreaseqty()}}},[t._v("-")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"qty"}],staticClass:"text-center mx-1",staticStyle:{width:"60px"},attrs:{type:"text"},domProps:{value:t.qty},on:{input:function(i){i.target.composing||(t.qty=i.target.value)}}}),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(i){i.preventDefault(),t.increaseqty()}}},[t._v("+")])])]),e("button",{staticClass:"btn btn-primary w-100 mt-5 mb-3",on:{click:function(i){return i.preventDefault(),t.addCart(t.product.id,t.qty)}}},[t._v("加入購物車")])])]),e("div",{staticClass:"swiper row mt-5"},[e("h3",{staticClass:"text-center mb-5 col-12"},[t._v("推薦商品")]),e("swiper",{ref:"mySwiper",staticClass:"p-0 text-center mb-5 col-12",attrs:{options:t.detailOptions}},t._l(t.filterProducts,(function(i){return e("swiper-slide",{key:i.id},[e("div",{staticClass:"swiper-picture"},[e("img",{staticClass:"swiper-img",attrs:{src:i.imageUrl,alt:"item.title"}}),e("div",{staticClass:"swiper-info"},[e("div",{staticClass:"swiper-info--btn btn btn-outline-primary",on:{click:function(e){return e.preventDefault(),t.directProduct(i.id)}}},[t._v("前往商品")])])])])})),1)],1)])],1),e("Footer")],1)},a=[],r=e("1157"),c=e.n(r),n=e("5d6b"),o=e("3650"),d=e("f688"),u={name:"Shop",components:{NavBar:n["a"],Footer:o["a"],Alert:d["a"]},data:function(){return{products:[],productId:"",product:{},qty:1,isloading:!1,loadingItem:"",description:"",content:"",detailOptions:{speed:500,autoplay:!0,breakpoints:{768:{slidesPerView:2,spaceBetween:30},992:{slidesPerView:3,spaceBetween:30},1280:{slidesPerView:4,spaceBetween:30}},pagination:{el:".swiper-pagination",clickable:!0}}}},methods:{getAllProducts:function(){var t=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("pigeon","/products/all");t.isloading=!0,this.$http.get(i).then((function(i){t.products=i.data.products,t.isloading=!1}))},getProduct:function(t){var i=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("pigeon","/product/").concat(this.$route.params.id);i.loadingItem=t,i.isloading=!0,this.$http.get(e).then((function(t){i.product=t.data.product,i.$set(i.product,"num",1),i.turnDetails(),i.loadingItem="",i.isloading=!1}))},directProduct:function(t){var i="/product/".concat(t);this.$router.push(i).catch((function(t){return t})),this.getProduct(t)},addCart:function(t){var i=this,e=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this),s="".concat("https://vue-course-api.hexschool.io","/api/").concat("pigeon","/cart/");e.loadingItem=t;var a={product_id:t,qty:e.qty};this.$http.post(s,{data:a}).then((function(t){e.loadingItem="",i.getCart(),c()("#productModal").modal("hide"),t.data.success?setTimeout((function(){i.$bus.$emit("message:push","已增加至購物車","success"),i.$bus.$emit("updateCart")}),500):setTimeout((function(){i.$bus.$emit("message:push","增加至購物車失敗","danger")}),500)}))},turnDetails:function(){var t=this,i=t.product,e=i.description,s=i.content;t.description=e.replace(/\n/g,"<br/>"),t.content=s.replace(/\n/g,"<br/>")},getCart:function(){var t=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("pigeon","/cart/");t.isloading=!0,this.$http.get(i).then((function(i){t.cartContents=i.data.data,t.loadingItem="",t.isloading=!1}))},increaseqty:function(){var t=this;t.qty>=0&&(t.qty+=1)},decreaseqty:function(){var t=this;t.qty>1&&(t.qty-=1)}},computed:{filterProducts:function(){var t=this;return t.products.filter((function(i){return i.category===t.product.category&&i.id!==t.product.id}))},swiper:function(){return this.$refs.mySwiper.$swiper}},created:function(){this.getCart(),this.getProduct(),this.getAllProducts()}},l=u,p=(e("9919"),e("2877")),g=Object(p["a"])(l,s,a,!1,null,"dba69182",null);i["default"]=g.exports}}]);
//# sourceMappingURL=chunk-57f30272.21150a17.js.map